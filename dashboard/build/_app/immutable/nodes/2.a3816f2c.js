import{s as nt,n as et,o as ot}from"../chunks/scheduler.e108d1fd.js";import{S as ct,i as it,g as d,s as A,m as q,h,j as _,y as J,c as N,n as O,f as v,k as p,a as X,x as t,o as F,z as rt,A as dt}from"../chunks/index.f2f39a4a.js";function st(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function lt(s,e,o){const i=s.slice();return i[7]=e[o],i[9]=o,i}function at(s){let e,o,i=s[7].username+"",P,w,g,E=new Date(s[7].last_login).toDateString()+"",S,B,a,r=s[7].count+"",T,R,C,$,k=s[7].balance+"",D,H,U,V,m,y="Send",z,I,b;function L(){return s[4](s[9],s[7])}return{c(){e=d("tr"),o=d("td"),P=q(i),w=A(),g=d("td"),S=q(E),B=A(),a=d("td"),T=q(r),R=A(),C=d("td"),$=q("$"),D=q(k),H=A(),U=d("td"),V=d("input"),m=d("button"),m.textContent=y,z=A(),this.h()},l(j){e=h(j,"TR",{class:!0});var c=_(e);o=h(c,"TD",{class:!0});var M=_(o);P=O(M,i),M.forEach(v),w=N(c),g=h(c,"TD",{class:!0});var u=_(g);S=O(u,E),u.forEach(v),B=N(c),a=h(c,"TD",{class:!0});var l=_(a);T=O(l,r),l.forEach(v),R=N(c),C=h(c,"TD",{class:!0});var f=_(C);$=O(f,"$"),D=O(f,k),f.forEach(v),H=N(c),U=h(c,"TD",{class:!0});var n=_(U);V=h(n,"INPUT",{id:!0,placeholder:!0,class:!0}),m=h(n,"BUTTON",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-1clenbn"&&(m.textContent=y),n.forEach(v),z=N(c),c.forEach(v),this.h()},h(){p(o,"class","svelte-ittog"),p(g,"class","svelte-ittog"),p(a,"class","svelte-ittog"),p(C,"class","svelte-ittog"),p(V,"id","addChipsInput"+s[9]),p(V,"placeholder","$0"),p(V,"class","svelte-ittog"),p(m,"class","svelte-ittog"),p(U,"class","svelte-ittog"),p(e,"class","svelte-ittog")},m(j,c){X(j,e,c),t(e,o),t(o,P),t(e,w),t(e,g),t(g,S),t(e,B),t(e,a),t(a,T),t(e,R),t(e,C),t(C,$),t(C,D),t(e,H),t(e,U),t(U,V),t(U,m),t(e,z),I||(b=dt(m,"click",L),I=!0)},p(j,c){s=j,c&1&&i!==(i=s[7].username+"")&&F(P,i),c&1&&E!==(E=new Date(s[7].last_login).toDateString()+"")&&F(S,E),c&1&&r!==(r=s[7].count+"")&&F(T,r),c&1&&k!==(k=s[7].balance+"")&&F(D,k)},d(j){j&&v(e),I=!1,b()}}}function ht(s){let e,o,i,P="USERS",w,g,E=s[0].length+"",S,B,a,r,T="HANDS",R,C,$,k,D,H,U="ADS",V,m,y,z,I,b,L,j='<th class="svelte-ittog">NAME</th> <th class="svelte-ittog">LastLogin</th> <th class="svelte-ittog">Hands</th> <th class="svelte-ittog">Balance</th> <th class="svelte-ittog">Add Chips</th>',c,M=st(s[0]),u=[];for(let l=0;l<M.length;l+=1)u[l]=at(lt(s,M,l));return{c(){e=d("div"),o=d("div"),i=d("span"),i.textContent=P,w=A(),g=d("span"),S=q(E),B=A(),a=d("div"),r=d("span"),r.textContent=T,R=A(),C=d("span"),$=q(s[1]),k=A(),D=d("div"),H=d("span"),H.textContent=U,V=A(),m=d("span"),y=q(s[2]),z=A(),I=d("div"),b=d("table"),L=d("tr"),L.innerHTML=j,c=A();for(let l=0;l<u.length;l+=1)u[l].c();this.h()},l(l){e=h(l,"DIV",{class:!0});var f=_(e);o=h(f,"DIV",{class:!0});var n=_(o);i=h(n,"SPAN",{"data-svelte-h":!0}),J(i)!=="svelte-ahwm9i"&&(i.textContent=P),w=N(n),g=h(n,"SPAN",{});var G=_(g);S=O(G,E),G.forEach(v),n.forEach(v),B=N(f),a=h(f,"DIV",{class:!0});var K=_(a);r=h(K,"SPAN",{"data-svelte-h":!0}),J(r)!=="svelte-13jraa8"&&(r.textContent=T),R=N(K),C=h(K,"SPAN",{});var Z=_(C);$=O(Z,s[1]),Z.forEach(v),K.forEach(v),k=N(f),D=h(f,"DIV",{class:!0});var Q=_(D);H=h(Q,"SPAN",{"data-svelte-h":!0}),J(H)!=="svelte-z3lbjo"&&(H.textContent=U),V=N(Q),m=h(Q,"SPAN",{});var x=_(m);y=O(x,s[2]),x.forEach(v),Q.forEach(v),f.forEach(v),z=N(l),I=h(l,"DIV",{class:!0});var tt=_(I);b=h(tt,"TABLE",{class:!0});var W=_(b);L=h(W,"TR",{class:!0,"data-svelte-h":!0}),J(L)!=="svelte-3lh09v"&&(L.innerHTML=j),c=N(W);for(let Y=0;Y<u.length;Y+=1)u[Y].l(W);W.forEach(v),tt.forEach(v),this.h()},h(){p(o,"class","info svelte-ittog"),p(a,"class","info svelte-ittog"),p(D,"class","info svelte-ittog"),p(e,"class","header svelte-ittog"),p(L,"class","svelte-ittog"),p(b,"class","usersTable svelte-ittog"),p(I,"class","usersDiv svelte-ittog")},m(l,f){X(l,e,f),t(e,o),t(o,i),t(o,w),t(o,g),t(g,S),t(e,B),t(e,a),t(a,r),t(a,R),t(a,C),t(C,$),t(e,k),t(e,D),t(D,H),t(D,V),t(D,m),t(m,y),X(l,z,f),X(l,I,f),t(I,b),t(b,L),t(b,c);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(b,null)},p(l,[f]){if(f&1&&E!==(E=l[0].length+"")&&F(S,E),f&2&&F($,l[1]),f&4&&F(y,l[2]),f&9){M=st(l[0]);let n;for(n=0;n<M.length;n+=1){const G=lt(l,M,n);u[n]?u[n].p(G,f):(u[n]=at(G),u[n].c(),u[n].m(b,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=M.length}},i:et,o:et,d(l){l&&(v(e),v(z),v(I)),rt(u,l)}}}function ut(s,e,o){let i=[],P=0,w=0;async function g(){console.log("updateUsers()");const a=await fetch("http://originaltrial:10000/getUsers");if(a.ok){const r=await a.json();o(0,i=r),o(2,w=0),i.forEach(T=>{o(2,w+=Number(T.count))}),console.log(i)}else console.error("failed to fetch users")}async function E(){console.log("updateHands()");const a=await fetch("http://originaltrial:10000/getHandsCount");if(a.ok){const r=await a.json();o(1,P=r)}else console.error("failed to fetch users")}ot(()=>{console.log("onMount()"),g(),E()});async function S(a,r){console.log(a),console.log(r);const T=document.getElementById("addChipsInput"+a).value;T&&((await fetch(`http://originaltrial:10000/addchips?user=${r}&chips=${T}`)).ok?g():console.error("failed to add chips"))}return[i,P,w,S,(a,r)=>{S(a,r.userid)}]}class pt extends ct{constructor(e){super(),it(this,e,ut,ht,nt,{})}}export{pt as component};
